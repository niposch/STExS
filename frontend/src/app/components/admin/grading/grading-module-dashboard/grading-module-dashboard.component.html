<div style="max-width: 1500px; margin:auto;">
  <div *ngIf="module != null else moduleLoading">
    <!-- HEADER -->
    <div class="vertical-container">
      <mat-label style="margin-bottom: 5px">Grading Dashboard for Module</mat-label>
      <mat-label class="module-title">{{ module.moduleName }}</mat-label>
    </div>

    <div style="padding: 15px 0 10px 0">
      <mat-divider></mat-divider>
    </div>

    <!-- DESCRIPTION -->
    <mat-label>Description</mat-label>
    <quill-view [content]="module.moduleDescription ?? ''"></quill-view>
  </div>
  <ng-template #moduleLoading>
    <div class="loading-module">
      <mat-spinner></mat-spinner>
    </div>
  </ng-template>

  <div style="padding: 10px 0 20px 0">
    <mat-divider></mat-divider>
  </div>

  <mat-card>
    <mat-label class="chapter-heading">Chapters</mat-label>
    <div style="height: 10px"></div>

    <cdk-accordion class="example-accordion" *ngIf="chapterList != null else loadingChapters">
      <cdk-accordion-item
        *ngFor="let listItem of chapterList; let index = index;"
        #accordionItem="cdkAccordionItem"
        class="example-accordion-item"
        role="button"
        tabindex="0"
        [attr.id]="'accordion-header-' + index"
        [attr.aria-expanded]="accordionItem.expanded"
        [attr.aria-controls]="'accordion-body-' + index">
        <div class="example-accordion-item-header" (click)="accordionItem.toggle()">
          <div class="vertical-container" style="width: 90%">
            <mat-label class="chapter-title" style="margin-bottom: 8px">{{ listItem.chapter.chapterName }}</mat-label>
            <quill-view-html style="width: 100%" [content]="listItem.chapter.chapterDescription ?? ''"></quill-view-html>
          </div>
          <span class="example-accordion-item-description vertically-centered" style="width: available;">
            Click to {{ accordionItem.expanded ? 'close' : 'open' }}
          </span>
        </div>
        <div
          class="example-accordion-item-body"
          role="region"
          [style.display]="accordionItem.expanded ? '' : 'none'"
          [attr.id]="'accordion-body-' + index"
          [attr.aria-labelledby]="'accordion-header-' + index">

          <div *ngFor="let exercise of listItem.exercises" class="exercise-item horizontal-container">
              <mat-label class="vertically-centered">{{exercise.exerciseName}}</mat-label>
              <button [routerLink]="['/grading/exercise']"
                      [queryParams]="{exerciseId:exercise.id}"
                      matTooltip="Grade this Exercise"
                      matTooltipPosition="left"
                      style="justify-self: flex-end"
                      mat-stroked-button>
                <mat-icon matListIcon>done_all</mat-icon>
              </button>
          </div>
        </div>
      </cdk-accordion-item>
    </cdk-accordion>
  </mat-card>
  <ng-template #loadingChapters>
    <div class="loading-chapters">
      <mat-spinner></mat-spinner>
    </div>
  </ng-template>
</div>
