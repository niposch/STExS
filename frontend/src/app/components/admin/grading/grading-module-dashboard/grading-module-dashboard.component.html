<div style="max-width: 1500px; margin:auto;">
  <div *ngIf="module != null else moduleLoading">
    <!-- HEADER -->
    <div class="vertical-container">
      <mat-label style="margin-bottom: 5px">Grading Dashboard for Module</mat-label>
      <mat-label class="module-title">{{ module.moduleName }}</mat-label>
    </div>

    <div style="padding: 15px 0 10px 0">
      <mat-divider></mat-divider>
    </div>

    <!-- DESCRIPTION -->
    <mat-label>Description</mat-label>
    <quill-view [content]="module.moduleDescription ?? ''"></quill-view>
  </div>
  <ng-template #moduleLoading>
    <div class="loading-module">
      <mat-spinner></mat-spinner>
    </div>
  </ng-template>

  <div style="padding: 10px 0 20px 0">
    <mat-divider></mat-divider>
  </div>

  <mat-card>
    <mat-label class="chapter-heading">Chapters</mat-label>
    <div style="height: 10px"></div>

    <cdk-accordion class="example-accordion" *ngIf="chapterList != null else loadingChapters">
      <cdk-accordion-item
        *ngFor="let listItem of chapterList; let index = index;"
        #accordionItem="cdkAccordionItem"
        class="example-accordion-item"
        role="button"
        tabindex="0"
        [attr.id]="'accordion-header-' + index"
        [attr.aria-expanded]="accordionItem.expanded"
        [attr.aria-controls]="'accordion-body-' + index">
        <div class="example-accordion-item-header" (click)="accordionItem.toggle()">
          <div class="vertical-container" style="width: 90%">
            <mat-label class="chapter-title" style="margin-bottom: 8px">{{ listItem.chapter.chapterName }}</mat-label>
            <quill-view-html style="width: 100%" [content]="listItem.chapter.chapterDescription ?? ''"></quill-view-html>
          </div>
          <span class="example-accordion-item-description vertically-centered" style="width: available;">
            Click to {{ accordionItem.expanded ? 'close' : 'open' }}
          </span>
        </div>
        <div
          class="example-accordion-item-body"
          role="region"
          [style.display]="accordionItem.expanded ? '' : 'none'"
          [attr.id]="'accordion-body-' + index"
          [attr.aria-labelledby]="'accordion-header-' + index">

          <div *ngFor="let exercise of listItem.exercises" class="exercise-item horizontal-container">
            <div class="horizontal-container">
              <div class="vertical-container" style="width: 150px; overflow: hidden">
                <mat-label class="vertically-centered">{{exercise.exerciseName}}</mat-label>
                <mat-label style="color: #999999">achievable Points: {{exercise.achievablePoints}}</mat-label>
              </div>
              <mat-chip-list class="vertically-centered" style="margin-left: 15px">
                <mat-chip disableRipple="true" selected *ngIf="exercise.exerciseType == exerciseType.SyntaxExercise">syntax exercise</mat-chip>
                <mat-chip disableRipple="true" selected *ngIf="exercise.exerciseType == exerciseType.NaturalLanguageDescripition">natural language description</mat-chip>
                <mat-chip disableRipple="true" selected *ngIf="exercise.exerciseType == exerciseType.Parson">parson puzzle</mat-chip>
                <mat-chip disableRipple="true" selected *ngIf="exercise.exerciseType == exerciseType.FindTheError">find the bug</mat-chip>
                <mat-chip disableRipple="true" selected *ngIf="exercise.exerciseType == exerciseType.ClozeText">fill in the blanks</mat-chip>
                <mat-chip disableRipple="true" selected *ngIf="exercise.exerciseType == exerciseType.CodeOutput">code output</mat-chip>
                <mat-chip disableRipple="true" selected *ngIf="exercise.exerciseType == exerciseType.ProgrammingTask">programming exercise</mat-chip>
              </mat-chip-list>
            </div>
            <button [routerLink]="['/grading/exercise']"
                    [queryParams]="{exerciseId:exercise.id}"
                    matTooltip="Grade this Exercise"
                    matTooltipPosition="left"
                    style="justify-self: flex-end"
                    mat-stroked-button>
              <mat-icon matListIcon>done_all</mat-icon>
            </button>
            <button [routerLink]="['/grading/exercise']" [queryParams]="{exerciseId:exercise.id}" style="justify-self: flex-end" mat-stroked-button> <mat-icon matListIcon>done_all</mat-icon></button>
          </div>
        </div>
      </cdk-accordion-item>
    </cdk-accordion>
  </mat-card>
  <ng-template #loadingChapters>
    <div class="loading-chapters">
      <mat-spinner></mat-spinner>
    </div>
  </ng-template>
</div>
